<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="../css/reset.css">
    <link rel="stylesheet" type="text/css" href="../css/common.css">
    <link rel="stylesheet" type="text/css" href="../css/normalize.css">
    <link rel="stylesheet" type="text/css" href="../css/zxx.lib.css">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <link rel="stylesheet" type="text/css" href="../css/sjj.css">
    
    <link rel="stylesheet" type="text/css" href="../css/shopcar.css">
</head>

<body>
    <div class="header">
        <div class="w1190 top">
            <div class="hi">HI,<a href="##">Admin</a>欢迎来到厨菜网!</div>
            <ul class="">
                <li><a href="">登录</a>|</li>
                <li><a href="">免费注册</a>|</li>
                <li><a href="">我的订单</a>|</li>
                <li><a href="" class="xxBtn">我的消息</a>|</li>
                <li><a href="" class="shopC">购物车</a></li>
                <li><a href="">帮助中心</a>|</li>
                <li><a href="">企业会员</a>|</li>
                <li><a href="">商家入口</a></li>
            </ul>
        </div>
        <div class="w1190 logoBar">
            <img src="../img/logo.png" class="logo">
            <div class="search">
                <input placeholder="请输入商品关键字" type="text" />
                <button>搜&nbsp;索</button>
                <div class="search-logo"></div>
            </div>
            <div class="phone">
                <img src="../img/people.png">
                <div class="number">
                    <p>全国客服电话</p>
                    <h2>400-888-8888</h2>
                </div>
            </div>
        </div>
        <div class="borderbg"></div>
        <div class="bread">
            <a class="bread-a home" href="## ">首页</a>>
            <a class="bread-a" href="javascript:;">购物车</a>
            <!-- 
        <span class="info-pro-te">共<font style="color:#c40000;">300</font>条相关产品</span> -->
        </div>
        <div class="w1190">
            <div class="shopcar-wrap">
                <div class="titbox">
                    <h3>全部商品:共<span>3</span>件</h3>
                </div>
                <div class="tab-list">
                    <form action="##">
                        <table class="tab-tit" width="100%">
                            <tr>
                                <td width="44%" class="ft-le">
                                    <label class="fl all-sele">
                                        <input type="checkbox" class="fl check" checked="checked">
                                        <span class="fl font">全选</span>
                                    </label>
                                    <span class="t1">商品信息</span>
                                </td>
                                <td width="11%">选项</td>
                                <td width="11%">单价</td>
                                <td width="13%">数量</td>
                                <td style="textalign:center;" width="13%">小计</td>
                                <td>操作</td>
                            </tr>
                        </table>
                        <table class="car-tab" width="100%">
                            <tr class="" style="border-left:none;border-right:none;">
                                <th colspan="6">
                                    <input type="checkbox" class="fl check" checked="checked">
                                    <span class="fl name-shop">太太乐旗舰店</span>
                                </th>
                            </tr>
                            <tr class="pro-tr" data-id="1">
                                <td width="44%">
                                    <input type="checkbox" class="check-one fl" checked="checked">
                                    <a href="" class="img fl"><img width="76" height="76" src="##" alt=""></a>
                                    <div class="fl word">
                                        <a href="" class="pro-name">王力乙级高防超厚钢板安全防盗标准冷轧入户门防盗GF-208子母门</a>
                                    </div>
                                </td>
                                <td width="11%"><span class="refe">左内开向 ， 颜色白色</span></td>
                                <td width="11%"><span class="unit f14">2000</span></td>
                                <td width="13%">
                                    <span class="num-btn fl cut">-</span>
                                    <input type="text" class="num-inp fl" value="1">
                                    <span class="num-btn fl add">+</span>
                                </td>
                                <td style="textalign:center;" width="13%"><span class="textalign" style="font-size:14px;color:#E4393C;">￥</span><span class="red one-price f14">￥2000.00</span></td>
                                <td><span class="dele">删除</span></td>
                            </tr>
                            <tr class="pro-tr" data-id="1">
                                <td width="44%">
                                    <input type="checkbox" class="check-one fl" checked="checked">
                                    <a href="" class="img fl"><img width="76" height="76" src="##" alt=""></a>
                                    <div class="fl word">
                                        <a href="" class="pro-name">王力乙级高防超厚钢板安全防盗标准冷轧入户门防盗GF-208子母门</a>
                                    </div>
                                </td>
                                <td width="11%"><span class="refe">左内开向左内开向 ， 颜色白色</span></td>
                                <td width="11%"><span class="unit f14">2000</span></td>
                                <td width="13%">
                                    <span class="num-btn fl cut">-</span>
                                    <input type="text" class="num-inp fl" value="1">
                                    <span class="num-btn fl add">+</span>
                                </td>
                                <td style="textalign:center;" width="13%"><span class="textalign" style="font-size:14px;color:#E4393C;">￥</span><span class="red one-price f14">￥2000.00</span></td>
                                <td><span class="dele">删除</span></td>
                            </tr>
                        </table>
                        <table class="car-tab" width="100%">
                            <tr style="border-left:none;border-right:none;">
                                <th colspan="6">
                                    <input type="checkbox" class="fl check" checked="checked">
                                    <span class="fl name-shop">海天官方旗舰店</span>
                                </th>
                            </tr>
                            <tr class="pro-tr" data-id="1">
                                <td width="44%">
                                    <input type="checkbox" class="check-one fl" checked="checked">
                                    <a href="" class="img fl"><img width="76" height="76" src="##" alt=""></a>
                                    <div class="fl word">
                                        <a href="" class="pro-name">王力乙级高防超厚钢板安全防盗标准冷轧入户门防盗GF-208子母门</a>
                                    </div>
                                </td>
                                <td width="11%"><span class="refe">左内开向 ， 颜色白色</span></td>
                                <td width="11%"><span class="unit f14">2000</span></td>
                                <td width="13%">
                                    <span class="num-btn fl cut">-</span>
                                    <input type="text" class="num-inp fl" value="1">
                                    <span class="num-btn fl add">+</span>
                                </td>
                                <td style="textalign:center;" width="13%"><span class="textalign" style="font-size:14px;color:#E4393C;">￥</span><span class="red one-price f14">￥2000.00</span></td>
                                <td><span class="dele">删除</span></td>
                            </tr>
                        </table>
                        <h3 style="height:30px;"></h3>
                        <div class="bot-price-box">
                            <div class="w-f f-cb main">
                                <label class="fl lab">
                                    <input type="checkbox" class="fl all-check" checked="checked">
                                    <span class="fl">全选</span>
                                </label>
                                <a href="javascript:;" class="dele-all fl" target="_top">删除选中物品</a>
                                <span class="fl sele-pro" style="float: left">已选商品　<i class="piece">2</i>　件</span>
                                <span class="fl">合计(不含运费)：</span>
                                <span style="color:#ff9c18;font-size:20px;" class="fl">￥</span>
                                <span style="margin-left:4px;" class="fl red sum-price">￥<i id="sum-price">4000.00</i></span>
                                <div class="bot-btn f-cb fr" style="margin-right: 10px;">
                                    <a href="##" class="fl link">继续购物</a>
                                    <input type="submit" class="fr sub-btn" value="结  算">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="foot w1190">
                <div class="foot-l">
                    <dl>
                        <dt>会员中心</dt>
                        <dd><a href="##">注册登录</a></dd>
                        <dd><a href="##">会员制度</a></dd>
                        <dd><a href="##">购物流程</a></dd>
                        <dd><a href="##">积分说明</a></dd>
                    </dl>
                    <dl>
                        <dt>售后服务</dt>
                        <dd><a href="##">退换货政策</a></dd>
                        <dd><a href="##">退换货流程</a></dd>
                        <dd><a href="##">发票制度</a></dd>
                        <dd><a href="##">投诉建议</a></dd>
                    </dl>
                    <dl>
                        <dt>商家中心</dt>
                        <dd><a href="##">免费入驻</a></dd>
                        <dd><a href="##">后台管理</a></dd>
                    </dl>
                    <dl>
                        <dt>公司介绍</dt>
                        <dd><a href="##">关于我们</a></dd>
                        <dd><a href="##">联系我们</a></dd>
                    </dl>
                </div>
                <div class="foot-r">
                    <dl>
                        <dt>客户服务中心</dt>
                        <dd><a href="##" class="callme">全国免费热线：400-8888-8888</a></dd>
                        <dd><a href="##">工作时间：工作日9:00-17:00</a></dd>
                    </dl>
                </div>
            </div>
            <div class="copyr w1190">
                <span class="copyr-l">Copyright&nbsp;@&nbsp;2016&nbsp;杭州创威光电科技有限公司&nbsp;版权所有.&nbsp;All&nbsp;Rights&nbsp;Reserved.&nbsp;浙ICP备00000000号</span>
                <span class="by">网站建设：博采网络</span>
            </div>
        </div>
</body>

</html>
<script type="text/javascript" src="../js/jQuery.js"></script>
<script type="text/javascript" src="../js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="../js/common.js"></script>
<script type="text/javascript" src="../js/jquery.SuperSlide.2.1.1.js"></script>
<script type="text/javascript" src="../js/jquery.scrollLoading.js"></script>
<script type="text/javascript" src="../js/imgshow.js"></script>
<script type="text/javascript" src="../js/magnifier.js"></script>
<script type="text/javascript" src="../js/bocfe.js"></script>
<script>
$(function() {
    $(".recharge-pro").slide({
        mainCell: ".bd ul",
        autoPlay: true,
        effect: "leftLoop",
        interTime: 4000,
        trigger: "click",
        vis: 5
    });

    refreshMoney();
    $(".car-tab .add").click(function() {
        var n = parseInt($(this).parent().find("input").val()); //购物个数
        var id = parseInt($(this).parent().parent().data('id')); //购物id
        $(this).parent().find("input").val(n + 1);
        cartChange(id, n + 1); //个数
        refreshMoney();
    })
    $(".car-tab .cut").click(function() {
        var n = parseInt($(this).parent().find("input").val());
        var id = parseInt($(this).parents("tr").data('id')); //购物id
        if (n > 1) {
            $(this).parent().find("input").val(n - 1);
            cartChange(id, n - 1); //个数
            refreshMoney();
        } else {
            $(this).parent().find("input").val(1);
            cartChange(id, 1); //个数
            refreshMoney();
        }
    })
    $(".car-tab .num-inp").keyup(function() {
        var n = parseInt($(this).parent().find("input").val());
        var id = parseInt($(this).parents("tr").data('id')); //购物id
        if (n > 1) {
            $(this).parent().find("input").val(n);
            cartChange(id, n); //个数
            refreshMoney();
        } else {
            $(this).parent().find("input").val(1);
            cartChange(id, 1); //个数
            refreshMoney();
        }
    });
    $(".car-tab td .dele").click(function() {
        var _this = $(this);
        if (confirm("确认要删除")) {
            var id = _this.parents('tr').data('id');
            delcartone(id); //删除单个产品
            if ($(this).parents("table").find('.pro-tr').length == 1) {
                $(this).parents(".pro-tr").prev("tr").remove();
                $(this).parents("tr").remove();
            } else {
                $(this).parents("tr").remove();
            }
            refreshMoney();
        }
    })
    $(".car-tab td .check-one").click(function() {
        refreshMoney();
    })
    $(".tab-tit .all-sele .check").click(function() {
        var isSelect = this.checked;
        if (isSelect) {
            $(".car-tab tr").each(function() {
                $(this).find("input")[0].checked = true;
            });
            $(".bot-price-box").find('.all-check')[0].checked = true;
            refreshMoney();
        } else {
            $(".car-tab tr").each(function() {
                $(this).find("input")[0].checked = false;
            });
            $(".bot-price-box").find('.all-check')[0].checked = false;
            refreshMoney();
        }
    })
    $(".bot-price-box .all-check").click(function() {
        $(".tab-tit .all-sele .check").click();
        refreshMoney();
    });
    $(".car-tab th .check").click(function() {
        var isSelect = this.checked;
        if (isSelect) {
            $(this).parents("tr").siblings('.pro-tr').each(function() {
                $(this).find(".check-one")[0].checked = true;
            });
            refreshMoney();
        } else {
            $(this).parents("tr").siblings('.pro-tr').each(function() {
                $(this).find(".check-one")[0].checked = false;
            });
            refreshMoney();
        }
    });

    // $(".bot-price-box .dele-all").click(function(){
    //     if (confirm('你确定删除所选商品吗')) {
    //         var arr = '';
    //         $('.car-tab tr.pro-tr').each(function(){
    //             var _this = $(this);
    //             var id = _this.data('id');
    //             if (id) {
    //                arr += _this.data('id') + ','; 
    //             }

    //         })
    //         arr = arr.substring(0, arr.length - 1);
    //         delcartgx (arr);//删除多个
    //         $('.car-tab tr.pro-tr').each(function(){
    //             var _this = $(this);
    //             if (_this.find('input[type="checkbox"]')[0].checked) {
    //                 _this.siblings('tr').remove();
    //                 _this.remove();
    //             }
    //         });
    //         refreshMoney();
    //     }
    // })

    $(".bot-price-box .dele-all").click(function() {
        $('.car-tab tr').each(function() {
            if ($(this).find('.check-one').is(':checked')) {
                $(this).remove();
            } else {

            }
        })
        $('.car-tab tr').each(function() {
            if ($(this).find('.check').is(':checked')) {
                $(this).remove();
            } else {

            }
        })

        if ($(".tab-tit").find('.check').is(':checked')) {
            $(".car-tab").hide();
        }
        limit()

        function limit() {
            var avId = new Array();
            $(".car-tab tr").each(function(i, limit) {
                var $limit = $(limit);
                if ($limit.find('.check-one').is(':checked')) {
                    avId.push($limit.attr("data-id"));
                };
            })
            var str_avId = avId.join();
            alert(str_avId)
        }



    })
})

/**
    当触发价格发生变动的条件后, 调用此方法
*/
function refreshMoney() {
    var _num = 0;
    var _price = 0;
    var arr = 0;
    var _ttnum = 0;
    $('.car-tab tr').each(function() {
        var _this = $(this);
        if (_this.find('input[type="checkbox"]')[0].checked) {
            var number = parseInt(_this.find('.num-inp').val()); //件数
            _num += number;
            var price = parseFloat(_this.find('.unit').html()); //单价
            if (price > 0) {
                var unitPrice = parseFloat(number * price * 100) / 100;
                _this.find('.one-price').html(parseFloat(unitPrice).toFixed(2));
                _price += unitPrice;

                arr += ',' + _this.data('id'); //获取产品id
            }

        }
    });
    $('.car-tab .pro-tr').each(function() {
        var _this = $(this);
        if (_this.find('input[type="checkbox"]')[0].checked) {
            var ttnum = 1; //商品个数
            _ttnum += ttnum;
        }
    });
    $(".bot-price-box .sele-pro i").html(_ttnum);
    $(".sum-price").html(parseFloat(_price).toFixed(2));
}

//加减购物产品
function cartChange(id, zgs) {
    $.ajax({

    });

}
//删除单个
function delcartone(id) {
    $.ajax({

    });
}
//删除勾选
function delcartgx(id) {
    $.ajax({

    });
}
</script>
